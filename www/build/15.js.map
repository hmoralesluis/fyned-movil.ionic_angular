{"version":3,"sources":["../../src/pages/home/home.module.ts","../../src/pages/home/home.ts"],"names":[],"mappings":"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","file":"15.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { HomePage } from './home';\n\n@NgModule({\n\tdeclarations: [\n\t\tHomePage\n\t],\n\timports: [\n\t\tIonicPageModule.forChild(HomePage)\n\t],\n\texports: [\n\t\tHomePage\n\t]\n})\n\nexport class HomePageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.module.ts","import { Component } from '@angular/core';\nimport { IonicPage, NavController, AlertController, MenuController, ToastController, PopoverController, ModalController, ActionSheetController, ActionSheet } from 'ionic-angular';\n\nimport {RestaurantService} from '../../providers/restaurant-service-mock';\nimport { RestBackendProvider } from '../../providers/rest-backend';\n// import { Plugins, Capacitor } from '@capacitor/core';\n\n@IonicPage({\n\tname: 'page-home',\n\tsegment: 'home',\n\tpriority: 'high'\n})\n\n@Component({\n  selector: 'page-home',\n  templateUrl: 'home.html'\n})\n\nexport class HomePage {\n\n  restaurants: Array<any>;\n  searchKey: string = \"\";\n  yourLocation: string = \"Sin ubicaciÃ³n\";\n  restaurantsRest: any[] = [];\n  largeRestaurantes: Number = 0;\n\timagesRestUrl: string;\n  haveCordenadas: Boolean = false;\n  sysdistance: any;\n\n\n  constructor(public navCtrl: NavController,\n    public menuCtrl: MenuController,\n    public popoverCtrl: PopoverController,\n    public locationCtrl: AlertController,\n    public modalCtrl: ModalController,\n    public toastCtrl: ToastController,\n    public service: RestaurantService,\n\t\tpublic serviceBackend: RestBackendProvider,\n\t\tprivate actionSheetCtrl: ActionSheetController) {\n\t\tthis.menuCtrl.swipeEnable(true, 'authenticated');\n\t\tthis.menuCtrl.enable(true);    \n\t\tthis.haveCordenadas = this.serviceBackend.getHaveCordenadas();\t\t\n\t\tthis.imagesRestUrl = this.serviceBackend.getImgRestUrl();\n  }\n\n  openRestaurantListPage(proptype) {\n  \tthis.navCtrl.push('page-restaurant-list', proptype);\n  }\n\n  openRestaurantFilterPage() {\n    let modal = this.modalCtrl.create('page-restaurant-filter');\n    modal.present();\n  }\n\n  openNearbyPage() {\n    this.navCtrl.push('page-nearby');\n  }\n\n  openOrders() {\n    this.navCtrl.push('page-orders');\n  }\n\n  openCart() {\n    this.navCtrl.push('page-cart');\n  }\n\n\topenRestaurantDetail(restaurant: any) {\n  \tthis.navCtrl.push('page-restaurant-detail', {\n\t\t\t'id': restaurant._id\n\t\t});\n\t}\n\n  openSettingsPage() {\n  \tthis.navCtrl.push('page-settings');\n  }\n\n  openNotificationsPage() {\n  \tthis.navCtrl.push('page-notifications');\n  }\n\n  openCategoryPage() {\n    this.navCtrl.push('page-category');\n  }\n\n\tonInput(event) {\n\t    this.service.findByName(this.searchKey)\n\t        .then(data => {\n\t            this.restaurants = data;\n\t        })\n\t        .catch(error => alert(JSON.stringify(error)));\n\t}\n\n\tonCancel(event) {\n\t    this.findAll();\n\t}\n\n\tfindAll() {\n\t    this.service.findAll()\n\t        .then(data => this.restaurants = data)\n\t        .catch(error => alert(error));\n  }\n\n  findSysDistance() {\n    this.serviceBackend.getsysdistance()\n    .then(data =>{\n      this.sysdistance = data;\n      this.sysdistance = this.sysdistance.distance;\n    })\n    .catch();\n  }\n\n  findAllRest(){\n    this.restaurantsRest = [];\n\t\tif(this.serviceBackend.getHaveCordenadas()){\n\t\t\tthis.serviceBackend.findAllRestaurants()\n\t\t\t\t\t\t\t.then(\n\t\t\t\t\t\t\t\t\tdata => {\n                      let temporal: any;\n\t\t\t\t\t\t\t\t\t\t\ttemporal = data;\n                      temporal = temporal.restaurants;\t\n                      let largo = temporal.length;\n                      for(let i = 0; i < largo; i++){\n                        if(this.isInDistance(temporal[i].latitude, temporal[i].longitude)){\n                          this.restaurantsRest.push(temporal[i]);\n                        }                        \n                      }                      \n                      this.largeRestaurantes = this.restaurantsRest.length;\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t.catch(error => alert(error));\n\t\t}\n  }\n  \n  private isInDistance(lat: number, lon: number) {\n        let datax = lat - this.serviceBackend.getLatitude();\n\t\t\t\tlet datay = lon - this.serviceBackend.getLongitude();\n\t\t\t\tdatax = Math.pow(datax, 2);\n\t\t\t\tdatay = Math.pow(datay, 2);\n\t\t\t\tlet datamix = datax + datay;\n        let dataend = Math.sqrt(datamix);\t\n        console.log('la distancia es ' + dataend); \n        if(dataend <= this.sysdistance)      \n          return true;\n        return false;  \n  }\n\n\tprivate locateUser() {\n\n    \t\tthis.serviceBackend.setLatitude(11);\n\t\t\t\tthis.serviceBackend.setLongitude(11)\n\t\t\t\tthis.serviceBackend.setHaveCordenadas(true);\n\t\t\t\tthis.haveCordenadas = true;\n        this.findAllRest();\n        this.yourLocation = 'Autolocalizado dir';    \n\n\n    // if (!Capacitor.isPluginAvailable('Geolocation')) {\n    //   console.log('no tenemos a capacitor disponible');\n    //   return;\n    // }\n    // // this.isLoading = true;\n    // Plugins.Geolocation.getCurrentPosition()\n    //   .then(geoPosition => {\n\t\t// \t\tthis.serviceBackend.setLatitude(geoPosition.coords.latitude);\n\t\t// \t\tthis.serviceBackend.setLongitude(geoPosition.coords.longitude)\n\t\t// \t\tthis.serviceBackend.setHaveCordenadas(true);\n\t\t// \t\tthis.haveCordenadas = true;\n\t\t// \t\tthis.findAllRest();\n\t\t// \t\t// this.isLoading = false;\n\t\t// \t\treturn;\n    //   })\n    //   .catch(err => {\n    //     // this.isLoading = false;\n\t\t// \t\t// this.showErrorAlert();\n\t\t// \t\tconsole.log('la funcion de la geolocalizacion dio un error');\n\t\t// \t\treturn;\n    //   });\n  }\n\n  mapLocation() {\n    let modalmap = this.modalCtrl.create('page-modal-map');\n    modalmap.present();\n    \n    // let changeLocation = this.locationCtrl.create({\n    //   title: 'Change Location',\n    //   message: \"Type your Address to change restaurant list in that area.\",\n    //   inputs: [\n    //     {\n    //       name: 'location',\n    //       placeholder: 'Enter your new Location',\n    //       type: 'text'\n    //     },\n    //   ],\n    //   buttons: [\n    //     {\n    //       text: 'Cancel',\n    //       handler: data => {\n    //         console.log('Cancel clicked');\n    //       }\n    //     },\n    //     {\n    //       text: 'Change',\n    //       handler: data => {\n    //         console.log('Change clicked', data);\n    //         this.yourLocation = data.location;\n    //         let toast = this.toastCtrl.create({\n    //           message: 'Location was change successfully',\n    //           duration: 3000,\n    //           position: 'top',\n    //           closeButtonText: 'OK',\n    //           showCloseButton: true\n    //         });\n    //         toast.present();\n    //       }\n    //     }\n    //   ]\n    // });\n    // changeLocation.present();\n  }\n\n  alertLocation() {\n\n\t\tlet actionSheet: ActionSheet = this.actionSheetCtrl.create({\n\t\t\ttitle: 'Location',\n\t\t\tbuttons: [\n\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: 'Auto-localizacion',\n\t\t\t\t\t\t\thandler: () => this.locateUser()\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: 'Desde el mapa',\n\t\t\t\t\t\t\thandler: () => this.mapLocation()\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t\ttext: 'Cancel',\n\t\t\t\t\t\t\trole: 'cancel',\n\t\t\t\t\t\t\thandler: () => console.log('cancel share')\n\t\t\t\t\t}\n\t\t\t]\n\t});\n\n\tactionSheet.present();    \n  }\n\n  presentNotifications(myEvent) {\n    console.log(myEvent);\n    let popover = this.popoverCtrl.create('page-notifications');\n    popover.present({\n      ev: myEvent\n    });\n  }\n\n  ionViewWillEnter() {    \n      this.navCtrl.canSwipeBack();\n      this.findSysDistance();\n      this.haveCordenadas = this.serviceBackend.getHaveCordenadas();\n      this.findAllRest();\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/home/home.ts"],"sourceRoot":""}